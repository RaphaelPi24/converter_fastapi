<!DOCTYPE html>
<html>
<head>
  <title>WebSocket Progress</title>
</head>
<body>
  <input id="duration" type="number" step="0.1" value="3.0">
  <button onclick="start()">Start</button>
  <div id="output"></div>

  <script>
    function start() {
      const duration = document.getElementById("duration").value;
      const output = document.getElementById("output");
      output.innerHTML = "";

      const ws = new WebSocket("ws://localhost:8000/ws/progress");

      ws.onopen = () => {
        ws.send(duration);
      };

      ws.onmessage = (event) => {
        if (event.data === "done") {
          output.innerHTML += "<p><strong>âœ… Done!</strong></p>";
        } else {
          output.innerHTML += `<p>Progress: ${event.data}%</p>`;
        }
      };

      ws.onerror = (err) => {
        output.innerHTML += `<p style="color:red;">Error: ${err.message}</p>`;
      };
    }
  </script>
</body>
</html>
